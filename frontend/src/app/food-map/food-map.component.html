<home-header></home-header>
<section class="guide">
    <h2><b>Find food near you</b></h2>
    <p>Use the search bar to find donatable food from<br>local stores and pantries</p>
</section>

<div class="food-map">
    <div class="actions-section">
        <div class="filter-section">
            <label for="categoryFilter">Filter by Tag:</label>
            <input type="text" id="categoryFilter" [(ngModel)]="filterCategoriesInput"
                placeholder="e.g., Canned, Fresh, Dairy">
            <button class="action-button query-button" (click)="runQuery()">Search</button>
            <button class="action-button clear-button" (click)="clearQuery()">Clear</button>
        </div>
        <button class="action-button toggle-view-button" (click)="toggleView()">Toggle View</button>
    </div>

    <mat-accordion *ngIf="viewMode === 'LIST-BY-ORGANIZATION'" class="food-pantries-accordion">
        <ng-container *ngFor="let site of sites; let i = index">
            <mat-expansion-panel [ngClass]="{'hidden-summary': siteInventoryEmpty[i] || !siteIncludesSearchedCategories[i]}" (opened)="onPanelOpened(i)" hideToggle>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ site.name }}
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="summary-container">
                    <public-inventory-summary [organizationID]="site.id!"
                        (onEmptyInventory)="onEmptyInventory(i, $event)"
                        (categoryNames)="updateSiteCategories(i, $event)"></public-inventory-summary>
                    <button class="full-inventory-button" id="full-inventory-button-{{i}}" matButton
                        (click)="onClickFullInventoryButton(i)">See full
                        inventory</button>
                </div>
            </mat-expansion-panel>
        </ng-container>
    </mat-accordion>

    <category-view *ngIf="viewMode === 'LIST-BY-CATEGORY'"></category-view>
</div>